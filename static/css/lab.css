:root {
    --bg-dark: #1e1e1e;
    --text-green: #0f0;
    --panel-bg: #f4f4f9;
    --border-color: #ddd;
    --cisco-blue: #00bce4;
    --cisco-blue-dark: #008ca3;
    --cisco-blue-darker: #006b7a;
    --cisco-blue-light: #66dcf5;
    --icon-white: #ffffff;
    --icon-red: #ff0000;
}

body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; height: 100vh; display: flex; overflow: hidden; }

/* --- LEFT SIDEBAR --- */
.sidebar { width: 40%; background: var(--panel-bg); border-right: 1px solid #ccc; display: flex; flex-direction: column; }

/* --- TOPOLOGY --- */
.topology-view { 
    height: 45%; background: #fff; border-bottom: 1px solid var(--border-color); 
    padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; 
}

.node-wrapper {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer; z-index: 2; position: relative; transition: transform 0.2s;
}
.node-wrapper:hover { transform: scale(1.1); }

/* Подсветка активного устройства (CSS Filter) */
.active-node .router .top, .active-node .router .body, 
.active-node .l3-switch .face-front, 
.active-node .l3-switch::before, .active-node .l3-switch::after {
    filter: hue-rotate(90deg) drop-shadow(0 0 5px #4caf50);
}

/* Текст под иконкой (absolute чтобы не ломать центровку линии) */
.node-labels {
    position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
    text-align: center; width: 200px; margin-top: 5px; pointer-events: none;
}
.device-name { font-weight: bold; font-size: 14px; color: #333; }
.device-ip { font-size: 11px; color: #666; font-family: monospace; }

.cloud { width: 100px; height: 60px; background: #e0e0e0; border-radius: 40px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #555; z-index: 1; border: 2px solid #ccc; }
.link-line { position: absolute; height: 3px; background: #333; top: 50%; transform: translateY(-50%); left: 15%; right: 15%; z-index: 0; }

/* --- CISCO ICONS --- */
/* L3 Switch */
.l3-switch { position: relative; width: 60px; height: 60px; transform: scale(0.8); }
.l3-switch .face-front { position: absolute; width: 100%; height: 100%; background-color: var(--cisco-blue); z-index: 10; display: flex; justify-content: center; align-items: center; box-shadow: inset 0 0 8px rgba(0,0,0,0.1); }
.l3-switch::before { content: ''; position: absolute; top: -11px; left: 6px; width: 100%; height: 11px; background-color: var(--cisco-blue-light); transform: skewX(-45deg); z-index: 5; }
.l3-switch::after { content: ''; position: absolute; top: -6px; right: -11px; width: 11px; height: 100%; background-color: var(--cisco-blue-dark); transform: skewY(-45deg); z-index: 4; }
.l3-center-dot { position: absolute; width: 12px; height: 12px; background-color: var(--icon-red); border-radius: 50%; z-index: 12; top: 50%; left: 50%; transform: translate(-50%, -50%); }
.l3-arrow { position: absolute; background-color: var(--icon-white); clip-path: polygon(0% 20%, 60% 20%, 60% 0%, 100% 50%, 60% 100%, 60% 80%, 0% 80%); width: 12px; height: 12px; top: 50%; left: 50%; margin-top: -6px; margin-left: -6px; }
.l3-arrow:nth-child(2) { transform: rotate(0deg) translate(18px); } .l3-arrow:nth-child(3) { transform: rotate(90deg) translate(18px); }
.l3-arrow:nth-child(4) { transform: rotate(180deg) translate(18px); } .l3-arrow:nth-child(5) { transform: rotate(270deg) translate(18px); }
.l3-arrow.diag { width: 12px; height: 12px; }
.l3-arrow:nth-child(6) { transform: rotate(45deg) translate(20px); } .l3-arrow:nth-child(7) { transform: rotate(135deg) translate(20px); }
.l3-arrow:nth-child(8) { transform: rotate(225deg) translate(20px); } .l3-arrow:nth-child(9) { transform: rotate(315deg) translate(20px); }

/* Router */
.router { position: relative; width: 80px; height: 45px; margin-top: 15px; margin-bottom: 10px; transform: scale(0.9); }
.router .body { width: 100%; height: 100%; background: linear-gradient(to right, var(--cisco-blue), var(--cisco-blue-darker)); border-bottom-left-radius: 50% 15px; border-bottom-right-radius: 50% 15px; position: absolute; bottom: 0; z-index: 1; }
.router .top { position: absolute; top: -15px; width: 100%; height: 30px; background-color: var(--cisco-blue); border-radius: 50%; z-index: 2; background: radial-gradient(circle at 30% 30%, var(--cisco-blue-light), var(--cisco-blue)); border-bottom: 1px solid var(--cisco-blue-dark); overflow: hidden; }
.router-arrow { position: absolute; background-color: var(--icon-white); clip-path: polygon(0% 35%, 60% 35%, 60% 0%, 100% 50%, 60% 100%, 60% 65%, 0% 65%); width: 22px; height: 10px; top: 50%; left: 50%; margin-top: -5px; margin-left: -12px; transform-origin: center center; }
.router-arrow:nth-child(1) { transform: translate(-12px, -4px) rotate(15deg) skewX(-45deg); } .router-arrow:nth-child(2) { transform: translate(13px, 4px) rotate(195deg) skewX(-45deg); }
.router-arrow:nth-child(3) { transform: translate(13px, -4px) rotate(-15deg) skewX(45deg); } .router-arrow:nth-child(4) { transform: translate(-13px, 4px) rotate(165deg) skewX(45deg); }

/* --- TABS --- */
.info-tabs { display: flex; background: #e0e0e0; cursor: pointer; }
.info-tab { flex: 1; padding: 10px; text-align: center; border-bottom: 2px solid transparent; font-weight: bold; }
.info-tab.active { background: #fff; border-bottom: 2px solid var(--cisco-blue); color: var(--cisco-blue); }
.content-area { flex: 1; overflow-y: auto; padding: 20px; background: #fff; font-size: 14px; line-height: 1.6; }
.hidden { display: none; }
.btn-reset { text-decoration:none; color:white; background:#d9534f; padding:5px 10px; border-radius:4px; font-size:12px; }

/* --- TERMINAL --- */
.right-panel { width: 60%; display: flex; flex-direction: column; background: #333; }
.console-tabs { display: flex; background: #444; padding-top: 5px; padding-left: 10px; }
.device-tab { padding: 8px 25px; background: #555; color: #ccc; cursor: pointer; border-radius: 5px 5px 0 0; font-weight: bold; font-size: 13px; margin-right: 2px; }
.device-tab.active { background: var(--bg-dark); color: #fff; border-top: 3px solid var(--cisco-blue); }

.terminal-wrapper {
    flex: 1; background: var(--bg-dark); color: var(--text-green);
    font-family: 'Courier New', Courier, monospace; font-size: 16px;
    overflow-y: auto; padding: 15px; cursor: text; user-select: text; 
}

#terminal-output { display: block; padding-bottom: 50px; }

/* Лог строки */
.log-line { 
    white-space: pre-wrap; word-wrap: break-word; 
    margin-bottom: 0; line-height: 1.2; display: block; 
}

/* Контейнер ввода */
.input-line { display: block; margin-top: 2px; }
#prompt { font-weight: bold; margin-right: 0.5em; float: left; }

/* Скрытый инпут */
#cmd-input { position: absolute; opacity: 0; top: 0; left: 0; height: 1px; width: 1px; z-index: -1; font-family: inherit; }

/* Курсор */
.cursor { display: inline-block; width: 10px; height: 1.2em; background-color: var(--text-green); animation: blink 1s step-end infinite; vertical-align: text-bottom; }
/* Курсор поверх символа */
.cursor-block { background-color: var(--text-green); color: var(--bg-dark); }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }